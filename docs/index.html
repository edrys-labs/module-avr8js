<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>AVR8js Simulator</title><meta name="description" content="This is an Arduino simulator module for Edrys based on <a href='https://github.com/wokwi/avr8js' target='_blank'>AVR8js</a>. It must be connected with an additional editor module, such as <a href='https://github.com/Cross-Lab-Project/edrys_module-editor' target='_blank'>module-editor</a> or <a href='https://github.com/Cross-Lab-Project/edrys_module-blockly-duino-v2' target='_blank'>module-blockly-duino-v2</a>. Uploads must be send via topic `execute`, of for more information and configuration options, see <br><br><a href='https://github.com/Cross-Lab-Project/edrys_module-avr8js' target='_blank'>Cross-Lab-Project/edrys_module-avr8js</a>"><meta name="show-in" content="*"><script type="module" src="/index.cf514772.js"></script><script src="https://edrys-labs.github.io/edrys-Lite/module/edrys.js"></script><script defer src="https://edrys-labs.github.io/edrys-Lite/module/vendor/alpine.min.js"></script><link rel="stylesheet" href="https://edrys-labs.github.io/edrys-Lite/module/vendor/water.min.css"><link rel="stylesheet" href="https://edrys-labs.github.io/edrys-Lite/module/vendor/open-iconic/css/open-iconic.min.css"><script>function disabled(e){document.getElementById("send").disabled=e,document.getElementById("stop").disabled=e,document.getElementById("stdin").disabled=e}function send(){const e=document.getElementById("stdin");if(window.runner){const n=e?.value||"";toTerminal(n+"\n"),window.runner.serial(n)}e.value=""}function stop(){window.runner&&(window.runner.stop(),window.runner=null,toTerminal("\nexecution stopped"),disabled(!0))}async function compile(e){window.runner&&stop();const n=await window.AVR8js.build(e);n.stderr?toTerminal(n.stderr,!1,!0):(toTerminal(n.stdout,!0,!0),n.hex?(disabled(!1),window.runner=window.AVR8js.execute(n.hex,toTerminal)):window.runner=null)}function toTerminal(e,n=!0,o=!1){const d=document.getElementById("stdout"),t=n?e:`<span style="color:red"}">${e}</sapn>`;o?d.innerHTML=t:d.innerHTML+=t,d.scrollTo(0,d.scrollHeight)}Edrys.onReady((()=>{console.log("AVR8js simulator loaded");let e=Edrys.module.config.modules||"";e+="\n\n"+(Edrys.module[Edrys.role.toLowerCase()+"Config"]?.modules||""),document.getElementById("modules").innerHTML=e})),Edrys.onMessage((({from:e,subject:n,body:o,module:d})=>{if(n===(Edrys.module.config?.execute||"execute"))try{JSON.parse(o)}catch(e){compile(o)}}),promiscuous=!0);</script><style>#modules{width:100%;height:100px}#stdout{width:calc(100% - 1rem);height:15rem;white-space:pre-wrap;background-color:#000;border:1px solid #fff;padding:.5rem;overflow:auto}#stdin{width:calc(100% - 12.5rem);margin-top:.5rem;display:inline}#send{width:4.75rem;margin-top:.5rem;margin-right:0;display:inline}#stop{width:5.75rem;float:right;margin-top:.5rem;margin-right:0;display:inline}</style></head><body> <div id="terminal"> <div id="stdout">$ ...</div> <button id="send" onclick="send()" disabled> >> </button> <input id="stdin" type="text" disabled> <button id="stop" onclick="stop()" disabled> stop </button> </div> <div id="modules"> </div> </body></html>